import{f as W,a as H}from"../chunks/BMcGth1X.js";import{B as te,w as Y,t as ae,L as re,M as ie,N as oe,i as P,G as se,I as ne,O as le,A as J,g as n,K as ue,x as l,y as i,$ as de,z as a,P as _,Q as q,s as y}from"../chunks/DfFwswwW.js";import{e as L,s as U}from"../chunks/BRn3e2qh.js";import{h as ve,s as ce,e as fe,r as h,i as me}from"../chunks/Bk8_9O6T.js";import{S as N,b as z,a as K}from"../chunks/CyO0l0kf.js";import{g as Q}from"../chunks/CjKtfhWQ.js";function V(e,o,u=!1){if(e.multiple){if(o==null)return;if(!re(o))return ie();for(var s of e.options)s.selected=o.includes(b(s));return}for(s of e.options){var d=b(s);if(oe(d,o)){s.selected=!0;return}}(!u||o!==void 0)&&(e.selectedIndex=-1)}function pe(e){var o=new MutationObserver(()=>{V(e,e.__value)});o.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ae(()=>{o.disconnect()})}function be(e,o,u=o){var s=new WeakSet,d=!0;te(e,"change",r=>{var c=r?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(c),b);else{var f=e.querySelector(c)??e.querySelector("option:not([disabled])");v=f&&b(f)}u(v),P!==null&&s.add(P)}),Y(()=>{var r=o();if(e===document.activeElement){var c=se??P;if(s.has(c))return}if(V(e,r,d),d&&r===void 0){var v=e.querySelector(":checked");v!==null&&(r=b(v),u(r))}e.__value=r,d=!1}),pe(e)}function b(e){return"__value"in e?e.__value:e.value}var _e=W("<option> </option>"),ye=W('<div class="center-container svelte-545apf"><h1 class="svelte-545apf">Auction Tic-Tac-Toe</h1> <div class="top-level-menu svelte-545apf"><div class="menu-section svelte-545apf"><h2>Create a Room</h2> <h3 class="svelte-545apf">Game Settings</h3> <form><div class="form-field"><label for="startingMoney">Starting money:</label> <input type="number" id="startingMoney"/></div> <div class="form-field"><label for="startingPlayer">Starting player:</label> <select id="startingPlayer"></select></div> <div class="form-field"><label for="useTiebreaker"><input id="useTiebreaker" type="checkbox"/> Use time as tiebreaker</label></div> <div class="form-field"><label for="hotSeat"><input id="hotSeat" type="checkbox"/> Hot seat mode (play both sides on one device)</label></div> <button type="submit"> </button></form></div> <div class="menu-section svelte-545apf"><h2>Join a Room</h2> <form><div class="form-field"><label for="roomCode">Room code:</label> <input id="roomCode" type="text" placeholder="ABCD" style="text-transform: uppercase"/></div> <button type="submit">JOIN ROOM</button></form> <h3 style="margin-top: 2rem;" class="svelte-545apf">How to Play</h3> <ol style="text-align: left; margin: 0; padding-left: 1.5rem;"><li>Two players compete to get three in a row</li> <li>On your turn, nominate a square and set a starting bid</li> <li>Your opponent can outbid you or pass</li> <li>Highest bidder gets the square and pays their bid</li> <li>Manage your money wisely to win!</li></ol></div></div> <a href="/" class="back-link svelte-545apf">‚Üê Back to Arcade</a></div>');function we(e,o){ne(o,!0);let u=q(""),s=q(!1),d=q(!1),r=le({startingMoney:100,startingPlayer:N.None,useTiebreaker:!1});async function c(){y(s,!0);try{const m=await(await fetch("/api/rooms/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameType:"auction-ttt",settings:r,hotSeat:n(d)})})).json();Q(`/auction-ttt/game/${m.roomCode}`)}catch(t){console.error("Failed to create room:",t),alert("Failed to create room"),y(s,!1)}}function v(){n(u).trim()&&Q(`/auction-ttt/game/${n(u).toUpperCase()}`)}var f=ye();ve("545apf",t=>{Y(()=>{de.title="Auction Tic-Tac-Toe | Damien's Arcade"})});var $=l(i(f),2),g=i($),T=l(i(g),4),S=i(T),k=l(i(S),2);h(k),ce(k,"min",0),a(S);var x=l(S,2),w=l(i(x),2);fe(w,21,()=>Object.values(N),me,(t,m)=>{var p=_e(),ee=i(p,!0);a(p);var G={};J(()=>{U(ee,n(m)===N.None?"Random":n(m)),G!==(G=n(m))&&(p.value=(p.__value=n(m))??"")}),H(t,p)}),a(w),a(x);var O=l(x,2),j=i(O),D=i(j);h(D),_(),a(j),a(O);var C=l(O,2),E=i(C),I=i(E);h(I),_(),a(E),a(C);var M=l(C,2),X=i(M,!0);a(M),a(T),a(g);var B=l(g,2),R=l(i(B),2),A=i(R),F=l(i(A),2);h(F),a(A);var Z=l(A,2);a(R),_(4),a(B),a($),_(2),a(f),J(t=>{M.disabled=n(s),U(X,n(s)?"CREATING...":"CREATE ROOM"),Z.disabled=t},[()=>!n(u).trim()]),L("submit",T,t=>{t.preventDefault(),c()}),z(k,()=>r.startingMoney,t=>r.startingMoney=t),be(w,()=>r.startingPlayer,t=>r.startingPlayer=t),K(D,()=>r.useTiebreaker,t=>r.useTiebreaker=t),K(I,()=>n(d),t=>y(d,t)),L("submit",R,t=>{t.preventDefault(),v()}),z(F,()=>n(u),t=>y(u,t)),H(e,f),ue()}export{we as component};
